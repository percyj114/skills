---
name: feishu-smart-doc-writer
description: |
  Feishu/Lark Smart Document Writer - é£ä¹¦æ™ºèƒ½æ–‡æ¡£å†™å…¥å™¨.
  
  æ ¸å¿ƒåŠŸèƒ½ï¼š
  1. æ™ºèƒ½åˆ†å—å†™å…¥ - è§£å†³é•¿æ–‡æ¡£APIé™åˆ¶å¯¼è‡´çš„ç©ºç™½é—®é¢˜
  2. è‡ªåŠ¨è½¬ç§»æ‰€æœ‰æƒ - åˆ›å»ºæ–‡æ¡£åè‡ªåŠ¨è½¬ç§»ç»™ç”¨æˆ·
  3. è‡ªåŠ¨ç´¢å¼•ç®¡ç† - è‡ªåŠ¨æ›´æ–°æœ¬åœ°æ–‡æ¡£ç´¢å¼•ï¼Œæ”¯æŒæœç´¢
  4. é¦–æ¬¡ä½¿ç”¨å¼•å¯¼ - è‡ªåŠ¨å¼•å¯¼é…ç½®OpenID
---

# Feishu Smart Doc Writer v1.3.0

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### 1. æ™ºèƒ½æ–‡æ¡£åˆ›å»º
- **è‡ªåŠ¨åˆ†å—**ï¼šé•¿å†…å®¹è‡ªåŠ¨åˆ†å‰²æˆå°å—ï¼Œé¿å…APIé™åˆ¶å¯¼è‡´çš„ç©ºç™½æ–‡æ¡£
- **è‡ªåŠ¨è½¬ç§»æ‰€æœ‰æƒ**ï¼šåˆ›å»ºåè‡ªåŠ¨ä½¿ç”¨ OpenID è½¬ç§»ç»™ç”¨æˆ·
- **è‡ªåŠ¨ç´¢å¼•æ›´æ–°**ï¼šæ–‡æ¡£ä¿¡æ¯è‡ªåŠ¨æ·»åŠ åˆ°æœ¬åœ°ç´¢å¼• `memory/feishu-docs-index.md`
- **æ™ºèƒ½åˆ†ç±»**ï¼šæ ¹æ®å†…å®¹è‡ªåŠ¨æ‰“æ ‡ç­¾ï¼ˆAIæŠ€æœ¯ã€ç”µå•†ã€å¥åº·è¿åŠ¨ç­‰ï¼‰

### 2. æ–‡æ¡£ç®¡ç†
- **æœç´¢æ–‡æ¡£**ï¼šæŒ‰å…³é”®è¯æœç´¢æœ¬åœ°ç´¢å¼•
- **åˆ—å‡ºæ–‡æ¡£**ï¼šæŒ‰æ ‡ç­¾ã€çŠ¶æ€ç­›é€‰æ–‡æ¡£åˆ—è¡¨
- **è¿½åŠ å†…å®¹**ï¼šå‘ç°æœ‰æ–‡æ¡£è¿½åŠ å†…å®¹ï¼ˆè‡ªåŠ¨åˆ†å—ï¼‰

---

## ğŸ“‹ å·¥å…·åˆ—è¡¨

### write_smart - æ™ºèƒ½åˆ›å»ºæ–‡æ¡£
åˆ›å»ºæ–‡æ¡£ï¼Œè‡ªåŠ¨å®Œæˆåˆ†å—å†™å…¥ã€æ‰€æœ‰æƒè½¬ç§»ã€ç´¢å¼•æ›´æ–°ã€‚

```json
{
  "title": "æ–‡æ¡£æ ‡é¢˜",
  "content": "æ–‡æ¡£å†…å®¹ï¼ˆæ”¯æŒé•¿å†…å®¹ï¼‰",
  "folder_token": "å¯é€‰çš„æ–‡ä»¶å¤¹token"
}
```

**è¿”å›ï¼š**
```json
{
  "doc_url": "https://feishu.cn/docx/xxx",
  "doc_token": "xxx",
  "chunks_count": 3,
  "owner_transferred": true,
  "index_updated": true
}
```

### append_smart - è¿½åŠ å†…å®¹
å‘ç°æœ‰æ–‡æ¡£è¿½åŠ å†…å®¹ï¼ˆè‡ªåŠ¨åˆ†å—ï¼‰ã€‚

```json
{
  "doc_url": "https://feishu.cn/docx/xxx",
  "content": "è¦è¿½åŠ çš„å†…å®¹"
}
```

### search_docs - æœç´¢æ–‡æ¡£
æœç´¢æœ¬åœ°ç´¢å¼•ä¸­çš„æ–‡æ¡£ã€‚

```json
{
  "keyword": "æœç´¢å…³é”®è¯",
  "search_in": ["name", "summary", "tags"]  // å¯é€‰ï¼Œé»˜è®¤æœç´¢æ‰€æœ‰å­—æ®µ
}
```

**è¿”å›ï¼š**
```json
{
  "results": [
    {
      "name": "æ–‡æ¡£å",
      "type": "docx",
      "link": "https://...",
      "summary": "æ‘˜è¦",
      "tags": "AIæŠ€æœ¯, OpenClaw"
    }
  ],
  "count": 1
}
```

### list_docs - åˆ—å‡ºæ–‡æ¡£
åˆ—å‡ºæ‰€æœ‰æ–‡æ¡£ï¼Œæ”¯æŒç­›é€‰ã€‚

```json
{
  "tag": "AIæŠ€æœ¯",      // å¯é€‰ï¼ŒæŒ‰æ ‡ç­¾ç­›é€‰
  "status": "å·²å®Œæˆ",   // å¯é€‰ï¼ŒæŒ‰çŠ¶æ€ç­›é€‰
  "limit": 10          // å¯é€‰ï¼Œé™åˆ¶æ•°é‡
}
```

### transfer_ownership - è½¬ç§»æ‰€æœ‰æƒ
æ‰‹åŠ¨è½¬ç§»æ–‡æ¡£æ‰€æœ‰æƒï¼ˆé€šå¸¸ä¸éœ€è¦ï¼Œwrite_smart å·²è‡ªåŠ¨å¤„ç†ï¼‰ã€‚

```json
{
  "doc_url": "https://feishu.cn/docx/xxx",
  "owner_openid": "ou_xxxxxxxx"
}
```

**æ³¨æ„ï¼š** åªéœ€è¦æä¾› OpenIDï¼Œtenant_access_token ç”± Skill è‡ªåŠ¨è·å–ã€‚

### configure - é…ç½® OpenID
é¦–æ¬¡ä½¿ç”¨æ—¶é…ç½® OpenIDã€‚

```json
{
  "openid": "ou_xxxxxxxx",
  "permission_checked": true
}
```

### get_config_status - æŸ¥çœ‹é…ç½®çŠ¶æ€
æŸ¥çœ‹å½“å‰é…ç½®çŠ¶æ€ã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### é¦–æ¬¡ä½¿ç”¨ï¼ˆ3æ­¥é…ç½®ï¼‰

**ç¬¬1æ­¥ï¼šè°ƒç”¨ write_smart**
```
/feishu-smart-doc-writer write_smart
title: æµ‹è¯•æ–‡æ¡£
content: è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡æ¡£å†…å®¹
```

**ç¬¬2æ­¥ï¼šè·å– OpenID**
å¦‚æœæœªé…ç½®ï¼Œä¼šæ˜¾ç¤ºå¼•å¯¼ï¼š
1. ç™»å½• https://open.feishu.cn
2. è¿›å…¥åº”ç”¨ â†’ æƒé™ç®¡ç† â†’ æœç´¢ `im:message`
3. ç‚¹å‡»ã€APIã€‘å‘é€æ¶ˆæ¯ â†’ å‰å¾€APIè°ƒè¯•å°
4. ç‚¹å‡»"å¿«é€Ÿå¤åˆ¶ open_id"ï¼Œé€‰æ‹©ä½ çš„è´¦å·ï¼Œå¤åˆ¶

**ç¬¬3æ­¥ï¼šé…ç½®å¹¶å¼€é€šæƒé™**
```
/feishu-smart-doc-writer configure
openid: ou_ä½ çš„OpenID
permission_checked: true
```

ç„¶ååˆ°æƒé™ç®¡ç†ï¼š
1. æœç´¢ `docs:permission.member:transfer`
2. ç‚¹å‡»"å¼€é€š"
3. **é‡è¦**ï¼šç‚¹å‡»"å‘å¸ƒ"æŒ‰é’®å‘å¸ƒæ–°ç‰ˆæœ¬

é…ç½®å®Œæˆåï¼Œä»¥ååˆ›å»ºæ–‡æ¡£ä¼šè‡ªåŠ¨ï¼š
- âœ… åˆ†å—å†™å…¥å†…å®¹
- âœ… è½¬ç§»æ‰€æœ‰æƒç»™ä½ 
- âœ… æ›´æ–°æœ¬åœ°ç´¢å¼•

---

## ğŸ“Š ç´¢å¼•ç®¡ç†

### è‡ªåŠ¨ç´¢å¼•æµç¨‹
```
write_smart åˆ›å»ºæ–‡æ¡£
    â†“
å†™å…¥å†…å®¹ï¼ˆè‡ªåŠ¨åˆ†å—ï¼‰
    â†“
è½¬ç§»æ‰€æœ‰æƒ
    â†“
è‡ªåŠ¨æ›´æ–°ç´¢å¼• â†’ memory/feishu-docs-index.md
    â†“
å®Œæˆï¼
```

### è‡ªåŠ¨åˆ†ç±»æ ‡ç­¾
æ ¹æ®å†…å®¹è‡ªåŠ¨è¯†åˆ«ï¼š
- **AIæŠ€æœ¯** - AIã€äººå·¥æ™ºèƒ½ã€æ¨¡å‹ã€GPTã€LLM
- **OpenClaw** - OpenClawã€skillã€agent
- **é£ä¹¦æ–‡æ¡£** - é£ä¹¦ã€æ–‡æ¡£ã€feishu
- **ç”µå•†** - ç”µå•†ã€TikTokã€Alibaba
- **å¥åº·è¿åŠ¨** - Garminã€Stravaã€éª‘è¡Œã€å¥åº·
- **æ¯æ—¥å½’æ¡£** - å¯¹è¯ã€å½’æ¡£ã€èŠå¤©è®°å½•

### ç´¢å¼•æ–‡ä»¶ä½ç½®
`memory/feishu-docs-index.md`

æ ¼å¼ï¼šMarkdown è¡¨æ ¼ï¼ŒåŒ…å«åºå·ã€åç§°ã€ç±»å‹ã€é“¾æ¥ã€æ‘˜è¦ã€çŠ¶æ€ã€æ ‡ç­¾ã€æ‰€æœ‰è€…

---

## ğŸ” ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šåˆ›å»ºæŠ€æœ¯æ–‡æ¡£
```
/feishu-smart-doc-writer write_smart
title: AIæŠ€æœ¯è°ƒç ”æŠ¥å‘Š
content: # AIæŠ€æœ¯æ¦‚è¿°\n\näººå·¥æ™ºèƒ½ï¼ˆAIï¼‰æ˜¯...
```

ç»“æœï¼š
- æ–‡æ¡£åˆ›å»ºæˆåŠŸ
- è‡ªåŠ¨æ‰“ä¸Š"AIæŠ€æœ¯"æ ‡ç­¾
- ç´¢å¼•å·²æ›´æ–°

### ç¤ºä¾‹2ï¼šæœç´¢æ–‡æ¡£
```
/feishu-smart-doc-writer search_docs
keyword: AIæŠ€æœ¯
```

### ç¤ºä¾‹3ï¼šåˆ—å‡ºæ‰€æœ‰æŠ€æœ¯æ–‡æ¡£
```
/feishu-smart-doc-writer list_docs
tag: AIæŠ€æœ¯
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### ç”¨æˆ·é…ç½®æ–‡ä»¶
ä½ç½®ï¼š`skills/feishu-smart-doc-writer/user_config.json`

```json
{
  "owner_openid": "ou_5b921cba0fd6e7c885276a02d730ec19",
  "permission_noted": true,
  "first_time": false
}
```

### å¿…éœ€æƒé™
- `docx:document:create` - åˆ›å»ºæ–‡æ¡£
- `docx:document:write` - å†™å…¥å†…å®¹
- `docs:permission.member:transfer` - è½¬ç§»æ‰€æœ‰æƒ âš ï¸ å…³é”®æƒé™

---

## ğŸ“ ç‰ˆæœ¬å†å²

### v1.3.0 (2026-02-22)
- âœ… æ–°å¢è‡ªåŠ¨ç´¢å¼•ç®¡ç†ï¼ˆindex_manager.pyï¼‰
- âœ… æ–°å¢ search_docs å·¥å…·ï¼ˆæœç´¢æœ¬åœ°ç´¢å¼•ï¼‰
- âœ… æ–°å¢ list_docs å·¥å…·ï¼ˆåˆ—å‡ºæ–‡æ¡£ï¼‰
- âœ… write_smart è‡ªåŠ¨æ›´æ–°ç´¢å¼•ï¼ˆä»£ç å±‚é¢å¼ºåˆ¶æ‰§è¡Œï¼‰
- âœ… æ™ºèƒ½è‡ªåŠ¨åˆ†ç±»æ ‡ç­¾

### v1.2.0
- âœ… è‡ªåŠ¨åˆ†å—å†™å…¥
- âœ… è‡ªåŠ¨è½¬ç§»æ‰€æœ‰æƒ
- âœ… é¦–æ¬¡ä½¿ç”¨å¼•å¯¼

### v1.1.0
- âœ… åŸºç¡€æ–‡æ¡£åˆ›å»ºå’Œè¿½åŠ 

---

## ğŸ”§ æ•…éšœæ’é™¤

### "open_id is not exist" é”™è¯¯
**åŸå› **ï¼šä½¿ç”¨äº† user_id è€Œä¸æ˜¯ openid
**è§£å†³**ï¼šä½¿ç”¨ä»¥ `ou_` å¼€å¤´çš„ openid

### "æƒé™ä¸è¶³" é”™è¯¯
**åŸå› **ï¼šæœªå¼€é€š `docs:permission.member:transfer` æƒé™ï¼Œæˆ–æœªå‘å¸ƒåº”ç”¨
**è§£å†³**ï¼š
1. æƒé™ç®¡ç† â†’ æœç´¢ `docs:permission.member:transfer` â†’ å¼€é€š
2. ç‚¹å‡»"å‘å¸ƒ"æŒ‰é’®å‘å¸ƒæ–°ç‰ˆæœ¬ï¼ˆå…³é”®ï¼ï¼‰

### ç´¢å¼•æœªæ›´æ–°
**æ£€æŸ¥**ï¼š
1. æŸ¥çœ‹ `memory/feishu-docs-index.md` æ˜¯å¦å­˜åœ¨
2. æ£€æŸ¥ write_smart è¿”å›çš„ `index_updated` å­—æ®µ
3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—

---

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. OpenID æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼ˆou_ å¼€å¤´ï¼‰
2. æƒé™æ˜¯å¦å·²å¼€é€šå¹¶å‘å¸ƒ
3. ç´¢å¼•æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
